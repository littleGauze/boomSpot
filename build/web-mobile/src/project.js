window.__require=function e(t,o,i){function r(c,s){if(!o[c]){if(!t[c]){var p=c.split("/");if(p=p[p.length-1],!t[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(n)return n(p,!0);throw new Error("Cannot find module '"+c+"'")}}var h=o[c]={exports:{}};t[c][0].call(h.exports,function(e){return r(t[c][1][e]||e)},h,h.exports,e,t,o,i)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({Game:[function(e,t,o){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Game");var i=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),r=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(n<3?r(c):n>3?r(t,o,c):r(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,s=n.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.score=null,t.player=null,t.enemy=null,t.boom=null,t.isFire=!1,t.playerAction=null,t.enemyAction=null,t.scoreCounter=0,t}return i(t,e),t.prototype.onLoad=function(){this.placePlayer(),this.placeEnemy(),this.node.on("touchstart",this.fire,this)},t.prototype.onDestroy=function(){this.node.off("touchstart",this.fire,this)},t.prototype.placePlayer=function(){this.player.active=!0,this.player.y=-cc.winSize.height/4;var e=-cc.winSize.height/2+80,t=cc.sequence(cc.moveTo(10,cc.v2(0,e)),cc.callFunc(this.die,this));this.player.runAction(t)},t.prototype.placeEnemy=function(){this.enemy.active=!0,this.enemy.x=0,this.enemy.y=cc.winSize.height/3;var e=cc.winSize.width/2-this.enemy.width/2,t=Math.random()*cc.winSize.height/4,o=.6+Math.random()+.5,i=cc.repeatForever(cc.sequence(cc.moveTo(o,-e,t),cc.moveTo(o,e,t)));this.playerAction=this.enemy.runAction(i)},t.prototype.fire=function(){if(!this.isFire){this.isFire=!0;var e=cc.winSize.height/2-80,t=cc.sequence(cc.moveTo(.6,cc.v2(0,e)),cc.callFunc(this.die,this));this.enemyAction=this.player.runAction(t)}},t.prototype.playBoom=function(e,t){this.boom.setPosition(e);var o=this.boom.getComponent(cc.ParticleSystem);void 0!==t&&(o.startColor=o.endColor=t),o.resetSystem()},t.prototype.die=function(){console.log("you are dead"),this.isFire=!1,this.scoreCounter=0,this.player.active=!1,this.playBoom(this.player.position,this.player.color),setTimeout(function(){cc.director.loadScene("game")},1e3)},t.prototype.update=function(){this.player.position.sub(this.enemy.position).mag()<this.player.width/2+this.enemy.width/2&&(this.isFire=!1,this.enemy.active=!1,this.playBoom(this.enemy.position,this.enemy.color),this.player.stopAction(this.playerAction),this.enemy.stopAction(this.enemyAction),this.score.string="Score: "+ ++this.scoreCounter,this.placePlayer(),this.placeEnemy())},r([s(cc.Label)],t.prototype,"score",void 0),r([s(cc.Node)],t.prototype,"player",void 0),r([s(cc.Node)],t.prototype,"enemy",void 0),r([s(cc.Node)],t.prototype,"boom",void 0),t=r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["Game"]);